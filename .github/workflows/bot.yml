name: Bot Forex EMA-RSI

on:
  schedule:
    # Corre cada hora en punto (puedes cambiarlo si quieres cada 30 min, cada 4 horas, etc.)
    - cron: '0 * * * *'
  workflow_dispatch:   # Permite ejecutarlo manualmente con un bot√≥n

jobs:
  run-bot:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout del repositorio
        uses: actions/checkout@v4

      - name: Configurar Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.12'

      - name: Instalar dependencias necesarias
        run: |
          python -m pip install --upgrade pip
          pip install polygon pandas numpy pytz

      - name: Ejecutar el bot
        env:
          POLYGON_API_KEY: ${{ secrets.POLYGON_API_KEY }}
          EMAIL_USER: ${{ secrets.EMAIL_USER }}
          EMAIL_PASSWORD: ${{ secrets.EMAIL_PASSWORD }}
          EMAIL_TO: ${{ secrets.EMAIL_TO }}
        run: python bot_alert.py

      - name: Fin del proceso
        run: echo "Bot finalizado - $(date)"
